import{j as I}from"./jsx-runtime.CYYqVSlZ.js";import{r as _,R as m}from"./index.DJO9vBfz.js";const dt="_visualization_16tpb_1",ft={visualization:dt},pt=`
  attribute vec2 a_position;
  void main() {
    gl_Position = vec4(a_position, 0, 1);
  }
`,ht=`
  precision highp float;

  uniform vec2 u_resolution;
  uniform float u_time;
  uniform sampler2D u_audioData;

  #define AMPLITUDE_SCALE 0.7
  #define FREQUENCY_SCALE 0.09
  #define AUDIO_SAMPLE_Y 0.3
  #define LINE_THICKNESS 0.02
  #define COLOR_SPEED 0.17
  #define HORIZONTAL_OFFSET 0.3
  #define VERTICAL_OFFSET 0.3

  vec3 palette(float t) {
    vec3 a = vec3(0.5, 0.5, 0.5);
    vec3 b = vec3(0.5, 0.5, 0.5);
    vec3 c = vec3(1.0, 1.0, 1.0);
    vec3 d = vec3(0.263, 0.416, 0.557);
    return a + b * cos(6.28318 * (c * t + d));
  }

  float sampleAudio(float x) {
    return AMPLITUDE_SCALE * texture2D(u_audioData, vec2(FREQUENCY_SCALE * x + HORIZONTAL_OFFSET, AUDIO_SAMPLE_Y)).x;
  }

  void main() {
    vec2 uv = (gl_FragCoord.xy * 2.0 - u_resolution.xy) / u_resolution.y;
    
    // Sample audio
    float audioSample = sampleAudio(uv.x * 0.5 + 0.5);
    
    // Calculate distance to the audio line
    float d = abs(uv.y + VERTICAL_OFFSET - audioSample);
    
    // Apply color based on vertical position and time
    vec3 col = palette(uv.y * 0.5 + 0.5 + u_time * COLOR_SPEED);
    
    d = abs(d);
    
    // Create glowing line effect
    d = LINE_THICKNESS / d;
    
    // Apply color and intensity
    col *= d;
    
    gl_FragColor = vec4(col, 1.0);
  }
`,mt=({audioData:t})=>{const n=_.useRef(null),[o,e]=_.useState(null),[r,i]=_.useState(null),[s,a]=_.useState({}),u=_.useRef(null),c=_.useRef(null);return _.useEffect(()=>{const l=n.current,d=l.getContext("webgl")||l.getContext("experimental-webgl");if(!d){console.error("Unable to initialize WebGL. Your browser may not support it.");return}e(d);const f=()=>{const S=l.clientWidth,v=l.clientHeight;(l.width!==S||l.height!==v)&&(l.width=S,l.height=v,d.viewport(0,0,l.width,l.height))};f(),window.addEventListener("resize",f);const g=gt(d,pt,ht);if(!g){console.error("Failed to create shader program");return}i(g);const w=d.createBuffer();d.bindBuffer(d.ARRAY_BUFFER,w),d.bufferData(d.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,1]),d.STATIC_DRAW);const E=d.getAttribLocation(g,"a_position");if(E===-1){console.error("Failed to get the storage location of a_position");return}d.enableVertexAttribArray(E),d.vertexAttribPointer(E,2,d.FLOAT,!1,0,0),u.current=d.createTexture(),d.bindTexture(d.TEXTURE_2D,u.current),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR),d.useProgram(g);const y={u_time:d.getUniformLocation(g,"u_time"),u_resolution:d.getUniformLocation(g,"u_resolution"),u_audioData:d.getUniformLocation(g,"u_audioData")};return a(y),d.uniform1i(y.u_audioData,0),()=>{window.removeEventListener("resize",f),cancelAnimationFrame(c.current),d&&(d.deleteProgram(g),d.deleteBuffer(w),d.deleteTexture(u.current))}},[]),_.useEffect(()=>{if(!o||!r||!s.u_resolution)return;const l=d=>{o.uniform1f(s.u_time,d*.001),o.uniform2f(s.u_resolution,o.canvas.width,o.canvas.height),o.clearColor(0,0,0,1),o.clear(o.COLOR_BUFFER_BIT),o.drawArrays(o.TRIANGLE_STRIP,0,4),c.current=requestAnimationFrame(l)};return c.current=requestAnimationFrame(l),()=>{cancelAnimationFrame(c.current)}},[o,r,s]),_.useEffect(()=>{if(!t||!o||!u.current)return;o.bindTexture(o.TEXTURE_2D,u.current);const l=new Uint8Array(t.length);for(let d=0;d<t.length;d++)l[d]=Math.floor(t[d]*255);o.texImage2D(o.TEXTURE_2D,0,o.LUMINANCE,l.length,1,0,o.LUMINANCE,o.UNSIGNED_BYTE,l)},[t,o]),I.jsx("canvas",{ref:n,className:ft.visualization,width:512,height:512})};function Le(t,n,o){const e=t.createShader(n);return t.shaderSource(e,o),t.compileShader(e),t.getShaderParameter(e,t.COMPILE_STATUS)?e:(console.error("An error occurred compiling the shaders: "+t.getShaderInfoLog(e)),console.error("Shader source:",o),t.deleteShader(e),null)}function gt(t,n,o){const e=Le(t,t.VERTEX_SHADER,n),r=Le(t,t.FRAGMENT_SHADER,o);if(!e||!r)return console.error("Error creating shader(s)"),null;const i=t.createProgram();return t.attachShader(i,e),t.attachShader(i,r),t.linkProgram(i),t.getProgramParameter(i,t.LINK_STATUS)?i:(console.error("Unable to initialize the shader program: "+t.getProgramInfoLog(i)),t.deleteProgram(i),t.deleteShader(e),t.deleteShader(r),null)}const vt="_audioPlayerHeader_xepwr_1",yt="_playerWrapper_xepwr_23",wt="_visualizationWrapper_xepwr_33",ie={audioPlayerHeader:vt,playerWrapper:yt,visualizationWrapper:wt};function H(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function V(t){"@babel/helpers - typeof";return V=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},V(t)}function Et(t,n){if(V(t)!="object"||!t)return t;var o=t[Symbol.toPrimitive];if(o!==void 0){var e=o.call(t,n||"default");if(V(e)!="object")return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(t)}function We(t){var n=Et(t,"string");return V(n)=="symbol"?n:n+""}function Tt(t,n){for(var o=0;o<n.length;o++){var e=n[o];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,We(e.key),e)}}function J(t,n,o){return n&&Tt(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function p(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ce(t,n){return ce=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,e){return o.__proto__=e,o},ce(t,n)}function G(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&ce(t,n)}function X(t,n){if(n&&(V(n)=="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return p(t)}function L(t){return L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},L(t)}function h(t,n,o){return(n=We(n))in t?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o,t}const j=/^[a-z0-9]+(-[a-z0-9]+)*$/,Z=(t,n,o,e="")=>{const r=t.split(":");if(t.slice(0,1)==="@"){if(r.length<2||r.length>3)return null;e=r.shift().slice(1)}if(r.length>3||!r.length)return null;if(r.length>1){const a=r.pop(),u=r.pop(),c={provider:r.length>0?r[0]:e,prefix:u,name:a};return n&&!K(c)?null:c}const i=r[0],s=i.split("-");if(s.length>1){const a={provider:e,prefix:s.shift(),name:s.join("-")};return n&&!K(a)?null:a}if(o&&e===""){const a={provider:e,prefix:"",name:i};return n&&!K(a,o)?null:a}return null},K=(t,n)=>t?!!((t.provider===""||t.provider.match(j))&&(n&&t.prefix===""||t.prefix.match(j))&&t.name.match(j)):!1,ze=Object.freeze({left:0,top:0,width:16,height:16}),Y=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),ye=Object.freeze({...ze,...Y}),le=Object.freeze({...ye,body:"",hidden:!1});function _t(t,n){const o={};!t.hFlip!=!n.hFlip&&(o.hFlip=!0),!t.vFlip!=!n.vFlip&&(o.vFlip=!0);const e=((t.rotate||0)+(n.rotate||0))%4;return e&&(o.rotate=e),o}function De(t,n){const o=_t(t,n);for(const e in le)e in Y?e in t&&!(e in o)&&(o[e]=Y[e]):e in n?o[e]=n[e]:e in t&&(o[e]=t[e]);return o}function St(t,n){const o=t.icons,e=t.aliases||Object.create(null),r=Object.create(null);function i(s){if(o[s])return r[s]=[];if(!(s in r)){r[s]=null;const a=e[s]&&e[s].parent,u=a&&i(a);u&&(r[s]=[a].concat(u))}return r[s]}return Object.keys(o).concat(Object.keys(e)).forEach(i),r}function Ct(t,n,o){const e=t.icons,r=t.aliases||Object.create(null);let i={};function s(a){i=De(e[a]||r[a],i)}return s(n),o.forEach(s),De(t,i)}function $e(t,n){const o=[];if(typeof t!="object"||typeof t.icons!="object")return o;t.not_found instanceof Array&&t.not_found.forEach(r=>{n(r,null),o.push(r)});const e=St(t);for(const r in e){const i=e[r];i&&(n(r,Ct(t,r,i)),o.push(r))}return o}const bt={provider:"",aliases:{},not_found:{},...ze};function ae(t,n){for(const o in n)if(o in t&&typeof t[o]!=typeof n[o])return!1;return!0}function He(t){if(typeof t!="object"||t===null)return null;const n=t;if(typeof n.prefix!="string"||!t.icons||typeof t.icons!="object"||!ae(t,bt))return null;const o=n.icons;for(const r in o){const i=o[r];if(!r.match(j)||typeof i.body!="string"||!ae(i,le))return null}const e=n.aliases||Object.create(null);for(const r in e){const i=e[r],s=i.parent;if(!r.match(j)||typeof s!="string"||!o[s]&&!e[s]||!ae(i,le))return null}return n}const xe=Object.create(null);function Pt(t,n){return{provider:t,prefix:n,icons:Object.create(null),missing:new Set}}function N(t,n){const o=xe[t]||(xe[t]=Object.create(null));return o[n]||(o[n]=Pt(t,n))}function we(t,n){return He(n)?$e(n,(o,e)=>{e?t.icons[o]=e:t.missing.add(o)}):[]}function At(t,n,o){try{if(typeof o.body=="string")return t.icons[n]={...o},!0}catch{}return!1}let z=!1;function Je(t){return typeof t=="boolean"&&(z=t),z}function Lt(t){const n=typeof t=="string"?Z(t,!0,z):t;if(n){const o=N(n.provider,n.prefix),e=n.name;return o.icons[e]||(o.missing.has(e)?null:void 0)}}function Dt(t,n){const o=Z(t,!0,z);if(!o)return!1;const e=N(o.provider,o.prefix);return At(e,o.name,n)}function xt(t,n){if(typeof t!="object")return!1;if(typeof n!="string"&&(n=t.provider||""),z&&!n&&!t.prefix){let r=!1;return He(t)&&(t.prefix="",$e(t,(i,s)=>{s&&Dt(i,s)&&(r=!0)})),r}const o=t.prefix;if(!K({provider:n,prefix:o,name:"a"}))return!1;const e=N(n,o);return!!we(e,t)}const Ge=Object.freeze({width:null,height:null}),Xe=Object.freeze({...Ge,...Y}),Ot=/(-?[0-9.]*[0-9]+[0-9.]*)/g,Rt=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function Oe(t,n,o){if(n===1)return t;if(o=o||100,typeof t=="number")return Math.ceil(t*n*o)/o;if(typeof t!="string")return t;const e=t.split(Ot);if(e===null||!e.length)return t;const r=[];let i=e.shift(),s=Rt.test(i);for(;;){if(s){const a=parseFloat(i);isNaN(a)?r.push(i):r.push(Math.ceil(a*n*o)/o)}else r.push(i);if(i=e.shift(),i===void 0)return r.join("");s=!s}}const Mt=t=>t==="unset"||t==="undefined"||t==="none";function It(t,n){const o={...ye,...t},e={...Xe,...n},r={left:o.left,top:o.top,width:o.width,height:o.height};let i=o.body;[o,e].forEach(w=>{const E=[],y=w.hFlip,S=w.vFlip;let v=w.rotate;y?S?v+=2:(E.push("translate("+(r.width+r.left).toString()+" "+(0-r.top).toString()+")"),E.push("scale(-1 1)"),r.top=r.left=0):S&&(E.push("translate("+(0-r.left).toString()+" "+(r.height+r.top).toString()+")"),E.push("scale(1 -1)"),r.top=r.left=0);let b;switch(v<0&&(v-=Math.floor(v/4)*4),v=v%4,v){case 1:b=r.height/2+r.top,E.unshift("rotate(90 "+b.toString()+" "+b.toString()+")");break;case 2:E.unshift("rotate(180 "+(r.width/2+r.left).toString()+" "+(r.height/2+r.top).toString()+")");break;case 3:b=r.width/2+r.left,E.unshift("rotate(-90 "+b.toString()+" "+b.toString()+")");break}v%2===1&&(r.left!==r.top&&(b=r.left,r.left=r.top,r.top=b),r.width!==r.height&&(b=r.width,r.width=r.height,r.height=b)),E.length&&(i='<g transform="'+E.join(" ")+'">'+i+"</g>")});const s=e.width,a=e.height,u=r.width,c=r.height;let l,d;s===null?(d=a===null?"1em":a==="auto"?c:a,l=Oe(d,u/c)):(l=s==="auto"?u:s,d=a===null?Oe(l,c/u):a==="auto"?c:a);const f={},g=(w,E)=>{Mt(E)||(f[w]=E.toString())};return g("width",l),g("height",d),f.viewBox=r.left.toString()+" "+r.top.toString()+" "+u.toString()+" "+c.toString(),{attributes:f,body:i}}const kt=/\sid="(\S+)"/g,Nt="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let Ft=0;function Ut(t,n=Nt){const o=[];let e;for(;e=kt.exec(t);)o.push(e[1]);if(!o.length)return t;const r="suffix"+(Math.random()*16777216|Date.now()).toString(16);return o.forEach(i=>{const s=typeof n=="function"?n(i):n+(Ft++).toString(),a=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");t=t.replace(new RegExp('([#;"])('+a+')([")]|\\.[a-z])',"g"),"$1"+s+r+"$3")}),t=t.replace(new RegExp(r,"g"),""),t}const de=Object.create(null);function Vt(t,n){de[t]=n}function fe(t){return de[t]||de[""]}function Ee(t){let n;if(typeof t.resources=="string")n=[t.resources];else if(n=t.resources,!(n instanceof Array)||!n.length)return null;return{resources:n,path:t.path||"/",maxURL:t.maxURL||500,rotate:t.rotate||750,timeout:t.timeout||5e3,random:t.random===!0,index:t.index||0,dataAfterTimeout:t.dataAfterTimeout!==!1}}const Te=Object.create(null),B=["https://api.simplesvg.com","https://api.unisvg.com"],Q=[];for(;B.length>0;)B.length===1||Math.random()>.5?Q.push(B.shift()):Q.push(B.pop());Te[""]=Ee({resources:["https://api.iconify.design"].concat(Q)});function Bt(t,n){const o=Ee(n);return o===null?!1:(Te[t]=o,!0)}function _e(t){return Te[t]}const jt=()=>{let t;try{if(t=fetch,typeof t=="function")return t}catch{}};let Re=jt();function Wt(t,n){const o=_e(t);if(!o)return 0;let e;if(!o.maxURL)e=0;else{let r=0;o.resources.forEach(s=>{r=Math.max(r,s.length)});const i=n+".json?icons=";e=o.maxURL-r-o.path.length-i.length}return e}function zt(t){return t===404}const $t=(t,n,o)=>{const e=[],r=Wt(t,n),i="icons";let s={type:i,provider:t,prefix:n,icons:[]},a=0;return o.forEach((u,c)=>{a+=u.length+1,a>=r&&c>0&&(e.push(s),s={type:i,provider:t,prefix:n,icons:[]},a=u.length),s.icons.push(u)}),e.push(s),e};function Ht(t){if(typeof t=="string"){const n=_e(t);if(n)return n.path}return"/"}const Jt=(t,n,o)=>{if(!Re){o("abort",424);return}let e=Ht(n.provider);switch(n.type){case"icons":{const i=n.prefix,a=n.icons.join(","),u=new URLSearchParams({icons:a});e+=i+".json?"+u.toString();break}case"custom":{const i=n.uri;e+=i.slice(0,1)==="/"?i.slice(1):i;break}default:o("abort",400);return}let r=503;Re(t+e).then(i=>{const s=i.status;if(s!==200){setTimeout(()=>{o(zt(s)?"abort":"next",s)});return}return r=501,i.json()}).then(i=>{if(typeof i!="object"||i===null){setTimeout(()=>{i===404?o("abort",i):o("next",r)});return}setTimeout(()=>{o("success",i)})}).catch(()=>{o("next",r)})},Gt={prepare:$t,send:Jt};function Xt(t){const n={loaded:[],missing:[],pending:[]},o=Object.create(null);t.sort((r,i)=>r.provider!==i.provider?r.provider.localeCompare(i.provider):r.prefix!==i.prefix?r.prefix.localeCompare(i.prefix):r.name.localeCompare(i.name));let e={provider:"",prefix:"",name:""};return t.forEach(r=>{if(e.name===r.name&&e.prefix===r.prefix&&e.provider===r.provider)return;e=r;const i=r.provider,s=r.prefix,a=r.name,u=o[i]||(o[i]=Object.create(null)),c=u[s]||(u[s]=N(i,s));let l;a in c.icons?l=n.loaded:s===""||c.missing.has(a)?l=n.missing:l=n.pending;const d={provider:i,prefix:s,name:a};l.push(d)}),n}function qe(t,n){t.forEach(o=>{const e=o.loaderCallbacks;e&&(o.loaderCallbacks=e.filter(r=>r.id!==n))})}function qt(t){t.pendingCallbacksFlag||(t.pendingCallbacksFlag=!0,setTimeout(()=>{t.pendingCallbacksFlag=!1;const n=t.loaderCallbacks?t.loaderCallbacks.slice(0):[];if(!n.length)return;let o=!1;const e=t.provider,r=t.prefix;n.forEach(i=>{const s=i.icons,a=s.pending.length;s.pending=s.pending.filter(u=>{if(u.prefix!==r)return!0;const c=u.name;if(t.icons[c])s.loaded.push({provider:e,prefix:r,name:c});else if(t.missing.has(c))s.missing.push({provider:e,prefix:r,name:c});else return o=!0,!0;return!1}),s.pending.length!==a&&(o||qe([t],i.id),i.callback(s.loaded.slice(0),s.missing.slice(0),s.pending.slice(0),i.abort))})}))}let Kt=0;function Qt(t,n,o){const e=Kt++,r=qe.bind(null,o,e);if(!n.pending.length)return r;const i={id:e,icons:n,callback:t,abort:r};return o.forEach(s=>{(s.loaderCallbacks||(s.loaderCallbacks=[])).push(i)}),r}function Yt(t,n=!0,o=!1){const e=[];return t.forEach(r=>{const i=typeof r=="string"?Z(r,n,o):r;i&&e.push(i)}),e}var Zt={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function er(t,n,o,e){const r=t.resources.length,i=t.random?Math.floor(Math.random()*r):t.index;let s;if(t.random){let T=t.resources.slice(0);for(s=[];T.length>1;){const P=Math.floor(Math.random()*T.length);s.push(T[P]),T=T.slice(0,P).concat(T.slice(P+1))}s=s.concat(T)}else s=t.resources.slice(i).concat(t.resources.slice(0,i));const a=Date.now();let u="pending",c=0,l,d=null,f=[],g=[];typeof e=="function"&&g.push(e);function w(){d&&(clearTimeout(d),d=null)}function E(){u==="pending"&&(u="aborted"),w(),f.forEach(T=>{T.status==="pending"&&(T.status="aborted")}),f=[]}function y(T,P){P&&(g=[]),typeof T=="function"&&g.push(T)}function S(){return{startTime:a,payload:n,status:u,queriesSent:c,queriesPending:f.length,subscribe:y,abort:E}}function v(){u="failed",g.forEach(T=>{T(void 0,l)})}function b(){f.forEach(T=>{T.status==="pending"&&(T.status="aborted")}),f=[]}function F(T,P,k){const R=P!=="success";switch(f=f.filter(x=>x!==T),u){case"pending":break;case"failed":if(R||!t.dataAfterTimeout)return;break;default:return}if(P==="abort"){l=k,v();return}if(R){l=k,f.length||(s.length?O():v());return}if(w(),b(),!t.random){const x=t.resources.indexOf(T.resource);x!==-1&&x!==t.index&&(t.index=x)}u="completed",g.forEach(x=>{x(k)})}function O(){if(u!=="pending")return;w();const T=s.shift();if(T===void 0){if(f.length){d=setTimeout(()=>{w(),u==="pending"&&(b(),v())},t.timeout);return}v();return}const P={status:"pending",resource:T,callback:(k,R)=>{F(P,k,R)}};f.push(P),c++,d=setTimeout(O,t.rotate),o(T,n,P.callback)}return setTimeout(O),S}function Ke(t){const n={...Zt,...t};let o=[];function e(){o=o.filter(a=>a().status==="pending")}function r(a,u,c){const l=er(n,a,u,(d,f)=>{e(),c&&c(d,f)});return o.push(l),l}function i(a){return o.find(u=>a(u))||null}return{query:r,find:i,setIndex:a=>{n.index=a},getIndex:()=>n.index,cleanup:e}}function Me(){}const se=Object.create(null);function tr(t){if(!se[t]){const n=_e(t);if(!n)return;const o=Ke(n),e={config:n,redundancy:o};se[t]=e}return se[t]}function rr(t,n,o){let e,r;if(typeof t=="string"){const i=fe(t);if(!i)return o(void 0,424),Me;r=i.send;const s=tr(t);s&&(e=s.redundancy)}else{const i=Ee(t);if(i){e=Ke(i);const s=t.resources?t.resources[0]:"",a=fe(s);a&&(r=a.send)}}return!e||!r?(o(void 0,424),Me):e.query(n,r,o)().abort}const Ie="iconify2",$="iconify",Qe=$+"-count",ke=$+"-version",Ye=36e5,nr=168;function pe(t,n){try{return t.getItem(n)}catch{}}function Se(t,n,o){try{return t.setItem(n,o),!0}catch{}}function Ne(t,n){try{t.removeItem(n)}catch{}}function he(t,n){return Se(t,Qe,n.toString())}function me(t){return parseInt(pe(t,Qe))||0}const ee={local:!0,session:!0},Ze={local:new Set,session:new Set};let Ce=!1;function or(t){Ce=t}let q=typeof window>"u"?{}:window;function et(t){const n=t+"Storage";try{if(q&&q[n]&&typeof q[n].length=="number")return q[n]}catch{}ee[t]=!1}function tt(t,n){const o=et(t);if(!o)return;const e=pe(o,ke);if(e!==Ie){if(e){const a=me(o);for(let u=0;u<a;u++)Ne(o,$+u.toString())}Se(o,ke,Ie),he(o,0);return}const r=Math.floor(Date.now()/Ye)-nr,i=a=>{const u=$+a.toString(),c=pe(o,u);if(typeof c=="string"){try{const l=JSON.parse(c);if(typeof l=="object"&&typeof l.cached=="number"&&l.cached>r&&typeof l.provider=="string"&&typeof l.data=="object"&&typeof l.data.prefix=="string"&&n(l,a))return!0}catch{}Ne(o,u)}};let s=me(o);for(let a=s-1;a>=0;a--)i(a)||(a===s-1?(s--,he(o,s)):Ze[t].add(a))}function rt(){if(!Ce){or(!0);for(const t in ee)tt(t,n=>{const o=n.data,e=n.provider,r=o.prefix,i=N(e,r);if(!we(i,o).length)return!1;const s=o.lastModified||-1;return i.lastModifiedCached=i.lastModifiedCached?Math.min(i.lastModifiedCached,s):s,!0})}}function ir(t,n){const o=t.lastModifiedCached;if(o&&o>=n)return o===n;if(t.lastModifiedCached=n,o)for(const e in ee)tt(e,r=>{const i=r.data;return r.provider!==t.provider||i.prefix!==t.prefix||i.lastModified===n});return!0}function ar(t,n){Ce||rt();function o(e){let r;if(!ee[e]||!(r=et(e)))return;const i=Ze[e];let s;if(i.size)i.delete(s=Array.from(i).shift());else if(s=me(r),!he(r,s+1))return;const a={cached:Math.floor(Date.now()/Ye),provider:t.provider,data:n};return Se(r,$+s.toString(),JSON.stringify(a))}n.lastModified&&!ir(t,n.lastModified)||Object.keys(n.icons).length&&(n.not_found&&(n=Object.assign({},n),delete n.not_found),o("local")||o("session"))}function Fe(){}function sr(t){t.iconsLoaderFlag||(t.iconsLoaderFlag=!0,setTimeout(()=>{t.iconsLoaderFlag=!1,qt(t)}))}function ur(t,n){t.iconsToLoad?t.iconsToLoad=t.iconsToLoad.concat(n).sort():t.iconsToLoad=n,t.iconsQueueFlag||(t.iconsQueueFlag=!0,setTimeout(()=>{t.iconsQueueFlag=!1;const{provider:o,prefix:e}=t,r=t.iconsToLoad;delete t.iconsToLoad;let i;if(!r||!(i=fe(o)))return;i.prepare(o,e,r).forEach(a=>{rr(o,a,u=>{if(typeof u!="object")a.icons.forEach(c=>{t.missing.add(c)});else try{const c=we(t,u);if(!c.length)return;const l=t.pendingIcons;l&&c.forEach(d=>{l.delete(d)}),ar(t,u)}catch(c){console.error(c)}sr(t)})})}))}const cr=(t,n)=>{const o=Yt(t,!0,Je()),e=Xt(o);if(!e.pending.length){let u=!0;return n&&setTimeout(()=>{u&&n(e.loaded,e.missing,e.pending,Fe)}),()=>{u=!1}}const r=Object.create(null),i=[];let s,a;return e.pending.forEach(u=>{const{provider:c,prefix:l}=u;if(l===a&&c===s)return;s=c,a=l,i.push(N(c,l));const d=r[c]||(r[c]=Object.create(null));d[l]||(d[l]=[])}),e.pending.forEach(u=>{const{provider:c,prefix:l,name:d}=u,f=N(c,l),g=f.pendingIcons||(f.pendingIcons=new Set);g.has(d)||(g.add(d),r[c][l].push(d))}),i.forEach(u=>{const{provider:c,prefix:l}=u;r[c][l].length&&ur(u,r[c][l])}),n?Qt(n,e,i):Fe};function lr(t,n){const o={...t};for(const e in n){const r=n[e],i=typeof r;e in Ge?(r===null||r&&(i==="string"||i==="number"))&&(o[e]=r):i===typeof o[e]&&(o[e]=e==="rotate"?r%4:r)}return o}const dr=/[\s,]+/;function fr(t,n){n.split(dr).forEach(o=>{switch(o.trim()){case"horizontal":t.hFlip=!0;break;case"vertical":t.vFlip=!0;break}})}function pr(t,n=0){const o=t.replace(/^-?[0-9.]*/,"");function e(r){for(;r<0;)r+=4;return r%4}if(o===""){const r=parseInt(t);return isNaN(r)?0:e(r)}else if(o!==t){let r=0;switch(o){case"%":r=25;break;case"deg":r=90}if(r){let i=parseFloat(t.slice(0,t.length-o.length));return isNaN(i)?0:(i=i/r,i%1===0?e(i):0)}}return n}function hr(t,n){let o=t.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const e in n)o+=" "+e+'="'+n[e]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+o+">"+t+"</svg>"}function mr(t){return t.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}function gr(t){return"data:image/svg+xml,"+mr(t)}function vr(t){return'url("'+gr(t)+'")'}let W;function yr(){try{W=window.trustedTypes.createPolicy("iconify",{createHTML:t=>t})}catch{W=null}}function wr(t){return W===void 0&&yr(),W?W.createHTML(t):t}const nt={...Xe,inline:!1},Er={xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink","aria-hidden":!0,role:"img"},Tr={display:"inline-block"},ge={backgroundColor:"currentColor"},ot={backgroundColor:"transparent"},Ue={Image:"var(--svg)",Repeat:"no-repeat",Size:"100% 100%"},Ve={WebkitMask:ge,mask:ge,background:ot};for(const t in Ve){const n=Ve[t];for(const o in Ue)n[t+o]=Ue[o]}const _r={...nt,inline:!0};function Be(t){return t+(t.match(/^[-0-9.]+$/)?"px":"")}const Sr=(t,n,o,e)=>{const r=o?_r:nt,i=lr(r,n),s=n.mode||"svg",a={},u=n.style||{},c={...s==="svg"?Er:{},ref:e};for(let S in n){const v=n[S];if(v!==void 0)switch(S){case"icon":case"style":case"children":case"onLoad":case"mode":case"_ref":case"_inline":break;case"inline":case"hFlip":case"vFlip":i[S]=v===!0||v==="true"||v===1;break;case"flip":typeof v=="string"&&fr(i,v);break;case"color":a.color=v;break;case"rotate":typeof v=="string"?i[S]=pr(v):typeof v=="number"&&(i[S]=v);break;case"ariaHidden":case"aria-hidden":v!==!0&&v!=="true"&&delete c["aria-hidden"];break;default:r[S]===void 0&&(c[S]=v)}}const l=It(t,i),d=l.attributes;if(i.inline&&(a.verticalAlign="-0.125em"),s==="svg"){c.style={...a,...u},Object.assign(c,d);let S=0,v=n.id;return typeof v=="string"&&(v=v.replace(/-/g,"_")),c.dangerouslySetInnerHTML={__html:wr(Ut(l.body,v?()=>v+"ID"+S++:"iconifyReact"))},m.createElement("svg",c)}const{body:f,width:g,height:w}=t,E=s==="mask"||(s==="bg"?!1:f.indexOf("currentColor")!==-1),y=hr(f,{...d,width:g+"",height:w+""});return c.style={...a,"--svg":vr(y),width:Be(d.width),height:Be(d.height),...Tr,...E?ge:ot,...u},m.createElement("span",c)};Je(!0);Vt("",Gt);if(typeof document<"u"&&typeof window<"u"){rt();const t=window;if(t.IconifyPreload!==void 0){const n=t.IconifyPreload,o="Invalid IconifyPreload syntax.";typeof n=="object"&&n!==null&&(n instanceof Array?n:[n]).forEach(e=>{try{(typeof e!="object"||e===null||e instanceof Array||typeof e.icons!="object"||typeof e.prefix!="string"||!xt(e))&&console.error(o)}catch{console.error(o)}})}if(t.IconifyProviders!==void 0){const n=t.IconifyProviders;if(typeof n=="object"&&n!==null)for(let o in n){const e="IconifyProviders["+o+"] is invalid.";try{const r=n[o];if(typeof r!="object"||!r||r.resources===void 0)continue;Bt(o,r)||console.error(e)}catch{console.error(e)}}}}class it extends m.Component{constructor(n){super(n),this.state={icon:null}}_abortLoading(){this._loading&&(this._loading.abort(),this._loading=null)}_setData(n){this.state.icon!==n&&this.setState({icon:n})}_checkIcon(n){const o=this.state,e=this.props.icon;if(typeof e=="object"&&e!==null&&typeof e.body=="string"){this._icon="",this._abortLoading(),(n||o.icon===null)&&this._setData({data:e});return}let r;if(typeof e!="string"||(r=Z(e,!1,!0))===null){this._abortLoading(),this._setData(null);return}const i=Lt(r);if(!i){(!this._loading||this._loading.name!==e)&&(this._abortLoading(),this._icon="",this._setData(null),i!==null&&(this._loading={name:e,abort:cr([r],this._checkIcon.bind(this,!1))}));return}if(this._icon!==e||o.icon===null){this._abortLoading(),this._icon=e;const s=["iconify"];r.prefix!==""&&s.push("iconify--"+r.prefix),r.provider!==""&&s.push("iconify--"+r.provider),this._setData({data:i,classes:s}),this.props.onLoad&&this.props.onLoad(e)}}componentDidMount(){this._checkIcon(!1)}componentDidUpdate(n){n.icon!==this.props.icon&&this._checkIcon(!0)}componentWillUnmount(){this._abortLoading()}render(){const n=this.props,o=this.state.icon;if(o===null)return n.children?n.children:m.createElement("span",{});let e=n;return o.classes&&(e={...n,className:(typeof n.className=="string"?n.className+" ":"")+o.classes.join(" ")}),Sr({...ye,...o.data},e,n._inline,n._ref)}}const D=m.forwardRef(function(n,o){const e={...n,_ref:o,_inline:!1};return m.createElement(it,e)});m.forwardRef(function(n,o){const e={...n,_ref:o,_inline:!0};return m.createElement(it,e)});function ve(){return ve=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var e in o)({}).hasOwnProperty.call(o,e)&&(t[e]=o[e])}return t},ve.apply(null,arguments)}var Cr=function(n){switch(n){case"stacked":return"rhap_stacked";case"stacked-reverse":return"rhap_stacked-reverse";case"horizontal":return"rhap_horizontal";case"horizontal-reverse":return"rhap_horizontal-reverse";default:return"rhap_stacked"}},at=function(n){return n instanceof MouseEvent?n.clientX:n.touches[0].clientX},ue=function(n){return n>9?n.toString():"0".concat(n)},U=function(n,o,e){if(!isFinite(n))return null;var r=Math.floor(n/60),i=ue(r),s=ue(Math.floor(n%60)),a=ue(Math.floor(r%60)),u=Math.floor(r/60),c="".concat(i,":").concat(s),l="".concat(u,":").concat(a,":").concat(s);if(e==="auto")return o>=3600?l:c;if(e==="mm:ss")return c;if(e==="hh:mm:ss")return l};function st(t,n){var o=!1;return function(e){o||(t(e),o=!0,setTimeout(function(){return o=!1},n))}}function br(t){var n=Pr();return function(){var e=L(t),r;if(n){var i=L(this).constructor;r=Reflect.construct(e,arguments,i)}else r=e.apply(this,arguments);return X(this,r)}}function Pr(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Ar=function(t){G(o,t);var n=br(o);function o(){var e;H(this,o);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return e=n.call.apply(n,[this].concat(i)),h(p(e),"audio",void 0),h(p(e),"timeOnMouseMove",0),h(p(e),"hasAddedAudioEventListener",!1),h(p(e),"downloadProgressAnimationTimer",void 0),h(p(e),"state",{isDraggingProgress:!1,currentTimePos:"0%",hasDownloadProgressAnimation:!1,downloadProgressArr:[],waitingForSeekCallback:!1}),h(p(e),"getCurrentProgress",function(a){var u=e.props,c=u.audio,l=u.progressBar,d=c.src.indexOf("blob:")!==0&&typeof e.props.srcDuration>"u";if(d&&(!c.src||!isFinite(c.currentTime)||!l.current))return{currentTime:0,currentTimePos:"0%"};var f=l.current.getBoundingClientRect(),g=f.width,w=at(a)-f.left;w<0?w=0:w>g&&(w=g);var E=e.getDuration(),y=E*w/g;return{currentTime:y,currentTimePos:"".concat((w/g*100).toFixed(2),"%")}}),h(p(e),"handleContextMenu",function(a){a.preventDefault()}),h(p(e),"handleMouseDownOrTouchStartProgressBar",function(a){a.stopPropagation();var u=e.getCurrentProgress(a.nativeEvent),c=u.currentTime,l=u.currentTimePos;isFinite(c)&&(e.timeOnMouseMove=c,e.setState({isDraggingProgress:!0,currentTimePos:l}),a.nativeEvent instanceof MouseEvent?(window.addEventListener("mousemove",e.handleWindowMouseOrTouchMove),window.addEventListener("mouseup",e.handleWindowMouseOrTouchUp)):(window.addEventListener("touchmove",e.handleWindowMouseOrTouchMove),window.addEventListener("touchend",e.handleWindowMouseOrTouchUp)))}),h(p(e),"handleWindowMouseOrTouchMove",function(a){a instanceof MouseEvent&&a.preventDefault(),a.stopPropagation();var u=window.getSelection();u&&u.type==="Range"&&u.empty();var c=e.state.isDraggingProgress;if(c){var l=e.getCurrentProgress(a),d=l.currentTime,f=l.currentTimePos;e.timeOnMouseMove=d,e.setState({currentTimePos:f})}}),h(p(e),"handleWindowMouseOrTouchUp",function(a){a.stopPropagation();var u=e.timeOnMouseMove,c=e.props,l=c.audio,d=c.onChangeCurrentTimeError,f=c.onSeek;if(f)e.setState({isDraggingProgress:!1,waitingForSeekCallback:!0},function(){f(l,u).then(function(){return e.setState({waitingForSeekCallback:!1})},function(w){throw new Error(w)})});else{var g={isDraggingProgress:!1};if(l.readyState===l.HAVE_NOTHING||l.readyState===l.HAVE_METADATA||!isFinite(u))try{l.load()}catch(w){return g.currentTimePos="0%",d&&d(w)}l.currentTime=u,e.setState(g)}a instanceof MouseEvent?(window.removeEventListener("mousemove",e.handleWindowMouseOrTouchMove),window.removeEventListener("mouseup",e.handleWindowMouseOrTouchUp)):(window.removeEventListener("touchmove",e.handleWindowMouseOrTouchMove),window.removeEventListener("touchend",e.handleWindowMouseOrTouchUp))}),h(p(e),"handleAudioTimeUpdate",st(function(a){var u=e.state.isDraggingProgress,c=a.target;if(!(u||e.state.waitingForSeekCallback===!0)){var l=c.currentTime,d=e.getDuration();e.setState({currentTimePos:"".concat((l/d*100||0).toFixed(2),"%")})}},e.props.progressUpdateInterval)),h(p(e),"handleAudioDownloadProgressUpdate",function(a){for(var u=a.target,c=e.getDuration(),l=[],d=0;d<u.buffered.length;d++){var f=u.buffered.start(d),g=u.buffered.end(d);l.push({left:"".concat(Math.round(100/c*f)||0,"%"),width:"".concat(Math.round(100/c*(g-f))||0,"%")})}clearTimeout(e.downloadProgressAnimationTimer),e.setState({downloadProgressArr:l,hasDownloadProgressAnimation:!0}),e.downloadProgressAnimationTimer=setTimeout(function(){e.setState({hasDownloadProgressAnimation:!1})},200)}),e}return J(o,[{key:"getDuration",value:function(){var r=this.props,i=r.audio,s=r.srcDuration;return typeof s>"u"?i.duration:s}},{key:"initialize",value:function(){var r=this.props.audio;r&&!this.hasAddedAudioEventListener&&(this.audio=r,this.hasAddedAudioEventListener=!0,r.addEventListener("timeupdate",this.handleAudioTimeUpdate),r.addEventListener("progress",this.handleAudioDownloadProgressUpdate))}},{key:"componentDidMount",value:function(){this.initialize()}},{key:"componentDidUpdate",value:function(){this.initialize()}},{key:"componentWillUnmount",value:function(){this.audio&&this.hasAddedAudioEventListener&&(this.audio.removeEventListener("timeupdate",this.handleAudioTimeUpdate),this.audio.removeEventListener("progress",this.handleAudioDownloadProgressUpdate)),clearTimeout(this.downloadProgressAnimationTimer)}},{key:"render",value:function(){var r=this.props,i=r.showDownloadProgress,s=r.showFilledProgress,a=r.progressBar,u=r.i18nProgressBar,c=this.state,l=c.currentTimePos,d=c.downloadProgressArr,f=c.hasDownloadProgressAnimation;return m.createElement("div",{className:"rhap_progress-container",ref:a,"aria-label":u,role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":Number(l.split("%")[0]),tabIndex:0,onMouseDown:this.handleMouseDownOrTouchStartProgressBar,onTouchStart:this.handleMouseDownOrTouchStartProgressBar,onContextMenu:this.handleContextMenu},m.createElement("div",{className:"rhap_progress-bar ".concat(i?"rhap_progress-bar-show-download":"")},m.createElement("div",{className:"rhap_progress-indicator",style:{left:l}}),s&&m.createElement("div",{className:"rhap_progress-filled",style:{width:l}}),i&&d.map(function(g,w){var E=g.left,y=g.width;return m.createElement("div",{key:w,className:"rhap_download-progress",style:{left:E,width:y,transitionDuration:f?".2s":"0s"}})})))}}]),o}(_.Component),Lr=function(n,o){return m.createElement(Ar,ve({},n,{progressBar:o}))};const Dr=_.forwardRef(Lr);function xr(t){var n=Or();return function(){var e=L(t),r;if(n){var i=L(this).constructor;r=Reflect.construct(e,arguments,i)}else r=e.apply(this,arguments);return X(this,r)}}function Or(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var je=function(t){G(o,t);var n=xr(o);function o(e){var r;H(this,o),r=n.call(this,e),h(p(r),"audio",void 0),h(p(r),"hasAddedAudioEventListener",!1),h(p(r),"state",{currentTime:r.props.defaultCurrentTime}),h(p(r),"handleAudioCurrentTimeChange",function(l){var d=l.target,f=r.props,g=f.isLeftTime,w=f.timeFormat,E=f.defaultCurrentTime;r.setState({currentTime:U(g?d.duration-d.currentTime:d.currentTime,d.duration,w)||E})}),h(p(r),"addAudioEventListeners",function(){var l=r.props.audio;l&&!r.hasAddedAudioEventListener&&(r.audio=l,r.hasAddedAudioEventListener=!0,l.addEventListener("timeupdate",r.handleAudioCurrentTimeChange),l.addEventListener("loadedmetadata",r.handleAudioCurrentTimeChange))});var i=e.audio,s=e.defaultCurrentTime,a=e.isLeftTime,u=e.timeFormat,c=s;return i&&(c=U(a?i.duration-i.currentTime:i.currentTime,i.duration,u)),r.state={currentTime:c},r}return J(o,[{key:"componentDidMount",value:function(){this.addAudioEventListeners()}},{key:"componentDidUpdate",value:function(){this.addAudioEventListeners()}},{key:"componentWillUnmount",value:function(){this.audio&&this.hasAddedAudioEventListener&&(this.audio.removeEventListener("timeupdate",this.handleAudioCurrentTimeChange),this.audio.removeEventListener("loadedmetadata",this.handleAudioCurrentTimeChange))}},{key:"render",value:function(){return this.state.currentTime}}]),o}(_.PureComponent);function Rr(t){var n=Mr();return function(){var e=L(t),r;if(n){var i=L(this).constructor;r=Reflect.construct(e,arguments,i)}else r=e.apply(this,arguments);return X(this,r)}}function Mr(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Ir=function(t){G(o,t);var n=Rr(o);function o(e){var r;H(this,o),r=n.call(this,e),h(p(r),"audio",void 0),h(p(r),"hasAddedAudioEventListener",!1),h(p(r),"state",{duration:r.props.audio?U(r.props.audio.duration,r.props.audio.duration,r.props.timeFormat):r.props.defaultDuration}),h(p(r),"handleAudioDurationChange",function(u){var c=u.target,l=r.props,d=l.timeFormat,f=l.defaultDuration;r.setState({duration:U(c.duration,c.duration,d)||f})}),h(p(r),"addAudioEventListeners",function(){var u=r.props.audio;u&&!r.hasAddedAudioEventListener&&(r.audio=u,r.hasAddedAudioEventListener=!0,u.addEventListener("durationchange",r.handleAudioDurationChange),u.addEventListener("abort",r.handleAudioDurationChange))});var i=e.audio,s=e.timeFormat,a=e.defaultDuration;return r.state={duration:i?U(i.duration,i.duration,s):a},r}return J(o,[{key:"componentDidMount",value:function(){this.addAudioEventListeners()}},{key:"componentDidUpdate",value:function(){this.addAudioEventListeners()}},{key:"componentWillUnmount",value:function(){this.audio&&this.hasAddedAudioEventListener&&(this.audio.removeEventListener("durationchange",this.handleAudioDurationChange),this.audio.removeEventListener("abort",this.handleAudioDurationChange))}},{key:"render",value:function(){return this.state.duration}}]),o}(_.PureComponent);function kr(t){var n=Nr();return function(){var e=L(t),r;if(n){var i=L(this).constructor;r=Reflect.construct(e,arguments,i)}else r=e.apply(this,arguments);return X(this,r)}}function Nr(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Fr=function(t){G(o,t);var n=kr(o);function o(){var e;H(this,o);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return e=n.call.apply(n,[this].concat(i)),h(p(e),"audio",void 0),h(p(e),"hasAddedAudioEventListener",!1),h(p(e),"volumeBar",_.createRef()),h(p(e),"volumeAnimationTimer",0),h(p(e),"lastVolume",e.props.volume),h(p(e),"state",{currentVolumePos:"".concat((e.lastVolume/1*100||0).toFixed(2),"%"),hasVolumeAnimation:!1,isDraggingVolume:!1}),h(p(e),"getCurrentVolume",function(a){var u=e.props.audio;if(!e.volumeBar.current)return{currentVolume:u.volume,currentVolumePos:e.state.currentVolumePos};var c=e.volumeBar.current.getBoundingClientRect(),l=c.width,d=at(a)-c.left,f,g;return d<0?(f=0,g="0%"):d>c.width?(f=1,g="100%"):(f=d/l,g="".concat(d/l*100,"%")),{currentVolume:f,currentVolumePos:g}}),h(p(e),"handleContextMenu",function(a){a.preventDefault()}),h(p(e),"handleClickVolumeButton",function(){var a=e.props.audio;a.volume>0?(e.lastVolume=a.volume,a.volume=0):a.volume=e.lastVolume}),h(p(e),"handleVolumnControlMouseOrTouchDown",function(a){a.stopPropagation();var u=e.props.audio,c=e.getCurrentVolume(a.nativeEvent),l=c.currentVolume,d=c.currentVolumePos;u.volume=l,e.setState({isDraggingVolume:!0,currentVolumePos:d}),a.nativeEvent instanceof MouseEvent?(window.addEventListener("mousemove",e.handleWindowMouseOrTouchMove),window.addEventListener("mouseup",e.handleWindowMouseOrTouchUp)):(window.addEventListener("touchmove",e.handleWindowMouseOrTouchMove),window.addEventListener("touchend",e.handleWindowMouseOrTouchUp))}),h(p(e),"handleWindowMouseOrTouchMove",function(a){a instanceof MouseEvent&&a.preventDefault(),a.stopPropagation();var u=e.props.audio,c=window.getSelection();c&&c.type==="Range"&&c.empty();var l=e.state.isDraggingVolume;if(l){var d=e.getCurrentVolume(a),f=d.currentVolume,g=d.currentVolumePos;u.volume=f,e.setState({currentVolumePos:g})}}),h(p(e),"handleWindowMouseOrTouchUp",function(a){a.stopPropagation(),e.setState({isDraggingVolume:!1}),a instanceof MouseEvent?(window.removeEventListener("mousemove",e.handleWindowMouseOrTouchMove),window.removeEventListener("mouseup",e.handleWindowMouseOrTouchUp)):(window.removeEventListener("touchmove",e.handleWindowMouseOrTouchMove),window.removeEventListener("touchend",e.handleWindowMouseOrTouchUp))}),h(p(e),"handleAudioVolumeChange",function(a){var u=e.state.isDraggingVolume,c=a.target,l=c.volume;(e.lastVolume>0&&l===0||e.lastVolume===0&&l>0)&&e.props.onMuteChange(),e.lastVolume=l,!u&&(e.setState({hasVolumeAnimation:!0,currentVolumePos:"".concat((l/1*100||0).toFixed(2),"%")}),clearTimeout(e.volumeAnimationTimer),e.volumeAnimationTimer=setTimeout(function(){e.setState({hasVolumeAnimation:!1})},100))}),e}return J(o,[{key:"componentDidUpdate",value:function(){var r=this.props.audio;r&&!this.hasAddedAudioEventListener&&(this.audio=r,this.hasAddedAudioEventListener=!0,r.addEventListener("volumechange",this.handleAudioVolumeChange))}},{key:"componentWillUnmount",value:function(){this.audio&&this.hasAddedAudioEventListener&&this.audio.removeEventListener("volumechange",this.handleAudioVolumeChange),clearTimeout(this.volumeAnimationTimer)}},{key:"render",value:function(){var r=this.props,i=r.audio,s=r.showFilledVolume,a=r.i18nVolumeControl,u=this.state,c=u.currentVolumePos,l=u.hasVolumeAnimation,d=i||{},f=d.volume;return m.createElement("div",{ref:this.volumeBar,onMouseDown:this.handleVolumnControlMouseOrTouchDown,onTouchStart:this.handleVolumnControlMouseOrTouchDown,onContextMenu:this.handleContextMenu,role:"progressbar","aria-label":a,"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":Number((f*100).toFixed(0)),tabIndex:0,className:"rhap_volume-bar-area"},m.createElement("div",{className:"rhap_volume-bar"},m.createElement("div",{className:"rhap_volume-indicator",style:{left:c,transitionDuration:l?".1s":"0s"}}),s&&m.createElement("div",{className:"rhap_volume-filled",style:{width:c}})))}}]),o}(_.Component),C;(function(t){t.CURRENT_TIME="CURRENT_TIME",t.CURRENT_LEFT_TIME="CURRENT_LEFT_TIME",t.PROGRESS_BAR="PROGRESS_BAR",t.DURATION="DURATION",t.ADDITIONAL_CONTROLS="ADDITIONAL_CONTROLS",t.MAIN_CONTROLS="MAIN_CONTROLS",t.VOLUME_CONTROLS="VOLUME_CONTROLS",t.LOOP="LOOP",t.VOLUME="VOLUME"})(C||(C={}));function Ur(t){var n=Vr();return function(){var e=L(t),r;if(n){var i=L(this).constructor;r=Reflect.construct(e,arguments,i)}else r=e.apply(this,arguments);return X(this,r)}}function Vr(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var ut=function(t){G(o,t);var n=Ur(o);function o(){var e;H(this,o);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return e=n.call.apply(n,[this].concat(i)),h(p(e),"audio",_.createRef()),h(p(e),"progressBar",_.createRef()),h(p(e),"container",_.createRef()),h(p(e),"lastVolume",e.props.volume),h(p(e),"listenTracker",void 0),h(p(e),"volumeAnimationTimer",void 0),h(p(e),"downloadProgressAnimationTimer",void 0),h(p(e),"togglePlay",function(a){a.stopPropagation();var u=e.audio.current;(u.paused||u.ended)&&u.src?e.playAudioPromise():u.paused||u.pause()}),h(p(e),"playAudioPromise",function(){e.audio.current.error&&e.audio.current.load();var a=e.audio.current.play();a?a.then(null).catch(function(u){var c=e.props.onPlayError;c&&c(new Error(u))}):e.forceUpdate()}),h(p(e),"isPlaying",function(){var a=e.audio.current;return a?!a.paused&&!a.ended:!1}),h(p(e),"handlePlay",function(a){e.forceUpdate(),e.props.onPlay&&e.props.onPlay(a)}),h(p(e),"handlePause",function(a){e.audio&&(e.forceUpdate(),e.props.onPause&&e.props.onPause(a))}),h(p(e),"handleEnded",function(a){e.audio&&(e.forceUpdate(),e.props.onEnded&&e.props.onEnded(a))}),h(p(e),"handleAbort",function(a){e.props.onAbort&&e.props.onAbort(a)}),h(p(e),"handleClickVolumeButton",function(){var a=e.audio.current;a.volume>0?(e.lastVolume=a.volume,a.volume=0):a.volume=e.lastVolume}),h(p(e),"handleMuteChange",function(){e.forceUpdate()}),h(p(e),"handleClickLoopButton",function(){e.audio.current.loop=!e.audio.current.loop,e.forceUpdate()}),h(p(e),"handleClickRewind",function(){var a=e.props,u=a.progressJumpSteps,c=a.progressJumpStep,l=u.backward||c;e.setJumpTime(-l)}),h(p(e),"handleClickForward",function(){var a=e.props,u=a.progressJumpSteps,c=a.progressJumpStep,l=u.forward||c;e.setJumpTime(l)}),h(p(e),"setJumpTime",function(a){var u=e.audio.current,c=u.duration,l=u.currentTime;if(u.readyState===u.HAVE_NOTHING||u.readyState===u.HAVE_METADATA||!isFinite(c)||!isFinite(l))try{u.load()}catch(f){return e.props.onChangeCurrentTimeError&&e.props.onChangeCurrentTimeError(f)}var d=l+a/1e3;d<0?(u.currentTime=0,d=0):d>c?(u.currentTime=c,d=c):u.currentTime=d}),h(p(e),"setJumpVolume",function(a){var u=e.audio.current.volume+a;u<0?u=0:u>1&&(u=1),e.audio.current.volume=u}),h(p(e),"handleKeyDown",function(a){if(e.props.hasDefaultKeyBindings)switch(a.key){case" ":(a.target===e.container.current||a.target===e.progressBar.current)&&(a.preventDefault(),e.togglePlay(a));break;case"ArrowLeft":e.handleClickRewind();break;case"ArrowRight":e.handleClickForward();break;case"ArrowUp":a.preventDefault(),e.setJumpVolume(e.props.volumeJumpStep);break;case"ArrowDown":a.preventDefault(),e.setJumpVolume(-e.props.volumeJumpStep);break;case"l":e.handleClickLoopButton();break;case"m":e.handleClickVolumeButton();break}}),h(p(e),"renderUIModules",function(a){return a.map(function(u,c){return e.renderUIModule(u,c)})}),h(p(e),"renderUIModule",function(a,u){var c=e.props,l=c.defaultCurrentTime,d=c.progressUpdateInterval,f=c.showDownloadProgress,g=c.showFilledProgress,w=c.showFilledVolume,E=c.defaultDuration,y=c.customIcons,S=c.showSkipControls,v=c.onClickPrevious,b=c.onClickNext,F=c.onChangeCurrentTimeError,O=c.showJumpControls,T=c.customAdditionalControls,P=c.customVolumeControls,k=c.muted,R=c.timeFormat,x=c.volume,ct=c.loop,M=c.mse,A=c.i18nAriaLabels;switch(a){case C.CURRENT_TIME:return m.createElement("div",{key:u,id:"rhap_current-time",className:"rhap_time rhap_current-time"},m.createElement(je,{audio:e.audio.current,isLeftTime:!1,defaultCurrentTime:l,timeFormat:R}));case C.CURRENT_LEFT_TIME:return m.createElement("div",{key:u,id:"rhap_current-left-time",className:"rhap_time rhap_current-left-time"},m.createElement(je,{audio:e.audio.current,isLeftTime:!0,defaultCurrentTime:l,timeFormat:R}));case C.PROGRESS_BAR:return m.createElement(Dr,{key:u,ref:e.progressBar,audio:e.audio.current,progressUpdateInterval:d,showDownloadProgress:f,showFilledProgress:g,onSeek:M&&M.onSeek,onChangeCurrentTimeError:F,srcDuration:M&&M.srcDuration,i18nProgressBar:A.progressControl});case C.DURATION:return m.createElement("div",{key:u,className:"rhap_time rhap_total-time"},M&&M.srcDuration?U(M.srcDuration,M.srcDuration,e.props.timeFormat):m.createElement(Ir,{audio:e.audio.current,defaultDuration:E,timeFormat:R}));case C.ADDITIONAL_CONTROLS:return m.createElement("div",{key:u,className:"rhap_additional-controls"},e.renderUIModules(T));case C.MAIN_CONTROLS:{var be=e.isPlaying(),te;return be?te=y.pause?y.pause:m.createElement(D,{icon:"mdi:pause-circle"}):te=y.play?y.play:m.createElement(D,{icon:"mdi:play-circle"}),m.createElement("div",{key:u,className:"rhap_main-controls"},S&&m.createElement("button",{"aria-label":A.previous,className:"rhap_button-clear rhap_main-controls-button rhap_skip-button",type:"button",onClick:v},y.previous?y.previous:m.createElement(D,{icon:"mdi:skip-previous"})),O&&m.createElement("button",{"aria-label":A.rewind,className:"rhap_button-clear rhap_main-controls-button rhap_rewind-button",type:"button",onClick:e.handleClickRewind},y.rewind?y.rewind:m.createElement(D,{icon:"mdi:rewind"})),m.createElement("button",{"aria-label":be?A.pause:A.play,className:"rhap_button-clear rhap_main-controls-button rhap_play-pause-button",type:"button",onClick:e.togglePlay},te),O&&m.createElement("button",{"aria-label":A.forward,className:"rhap_button-clear rhap_main-controls-button rhap_forward-button",type:"button",onClick:e.handleClickForward},y.forward?y.forward:m.createElement(D,{icon:"mdi:fast-forward"})),S&&m.createElement("button",{"aria-label":A.next,className:"rhap_button-clear rhap_main-controls-button rhap_skip-button",type:"button",onClick:b},y.next?y.next:m.createElement(D,{icon:"mdi:skip-next"})))}case C.VOLUME_CONTROLS:return m.createElement("div",{key:u,className:"rhap_volume-controls"},e.renderUIModules(P));case C.LOOP:{var Pe=e.audio.current?e.audio.current.loop:ct,re;return Pe?re=y.loop?y.loop:m.createElement(D,{icon:"mdi:repeat"}):re=y.loopOff?y.loopOff:m.createElement(D,{icon:"mdi:repeat-off"}),m.createElement("button",{key:u,"aria-label":Pe?A.loop:A.loopOff,className:"rhap_button-clear rhap_repeat-button",type:"button",onClick:e.handleClickLoopButton},re)}case C.VOLUME:{var lt=e.audio.current||{},Ae=lt.volume,ne=Ae===void 0?k?0:x:Ae,oe;return ne?oe=y.volume?y.volume:m.createElement(D,{icon:"mdi:volume-high"}):oe=y.volume?y.volumeMute:m.createElement(D,{icon:"mdi:volume-mute"}),m.createElement("div",{key:u,className:"rhap_volume-container"},m.createElement("button",{"aria-label":ne?A.volume:A.volumeMute,onClick:e.handleClickVolumeButton,type:"button",className:"rhap_button-clear rhap_volume-button"},oe),m.createElement(Fr,{audio:e.audio.current,volume:ne,onMuteChange:e.handleMuteChange,showFilledVolume:w,i18nVolumeControl:A.volumeControl}))}default:return _.isValidElement(a)?a.key?a:_.cloneElement(a,{key:u}):null}}),e}return J(o,[{key:"componentDidMount",value:function(){var r=this;this.forceUpdate();var i=this.audio.current;this.props.muted?i.volume=0:i.volume=this.lastVolume,i.addEventListener("error",function(s){var a=s.target;if(a.error&&a.currentTime===a.duration)return r.props.onEnded&&r.props.onEnded(s);r.props.onError&&r.props.onError(s)}),i.addEventListener("canplay",function(s){r.props.onCanPlay&&r.props.onCanPlay(s)}),i.addEventListener("canplaythrough",function(s){r.props.onCanPlayThrough&&r.props.onCanPlayThrough(s)}),i.addEventListener("play",this.handlePlay),i.addEventListener("abort",this.handleAbort),i.addEventListener("ended",this.handleEnded),i.addEventListener("playing",function(s){r.props.onPlaying&&r.props.onPlaying(s)}),i.addEventListener("seeking",function(s){r.props.onSeeking&&r.props.onSeeking(s)}),i.addEventListener("seeked",function(s){r.props.onSeeked&&r.props.onSeeked(s)}),i.addEventListener("waiting",function(s){r.props.onWaiting&&r.props.onWaiting(s)}),i.addEventListener("emptied",function(s){r.props.onEmptied&&r.props.onEmptied(s)}),i.addEventListener("stalled",function(s){r.props.onStalled&&r.props.onStalled(s)}),i.addEventListener("suspend",function(s){r.props.onSuspend&&r.props.onSuspend(s)}),i.addEventListener("loadstart",function(s){r.props.onLoadStart&&r.props.onLoadStart(s)}),i.addEventListener("loadedmetadata",function(s){r.props.onLoadedMetaData&&r.props.onLoadedMetaData(s)}),i.addEventListener("loadeddata",function(s){r.props.onLoadedData&&r.props.onLoadedData(s)}),i.addEventListener("pause",this.handlePause),i.addEventListener("timeupdate",st(function(s){r.props.onListen&&r.props.onListen(s)},this.props.listenInterval)),i.addEventListener("volumechange",function(s){r.props.onVolumeChange&&r.props.onVolumeChange(s)}),i.addEventListener("encrypted",function(s){var a=r.props.mse;a&&a.onEcrypted&&a.onEcrypted(s)})}},{key:"componentDidUpdate",value:function(r){var i=this.props,s=i.src,a=i.autoPlayAfterSrcChange;r.src!==s&&(a?this.playAudioPromise():this.forceUpdate())}},{key:"render",value:function(){var r=this.props,i=r.className,s=r.src,a=r.loop,u=r.preload,c=r.autoPlay,l=r.crossOrigin,d=r.mediaGroup,f=r.header,g=r.footer,w=r.layout,E=r.customProgressBarSection,y=r.customControlsSection,S=r.children,v=r.style,b=r.i18nAriaLabels,F=this.audio.current?this.audio.current.loop:a,O=F?"rhap_loop--on":"rhap_loop--off",T=this.isPlaying()?"rhap_play-status--playing":"rhap_play-status--paused";return m.createElement("div",{role:"group",tabIndex:0,"aria-label":b.player,className:"rhap_container ".concat(O," ").concat(T," ").concat(i),onKeyDown:this.handleKeyDown,ref:this.container,style:v},m.createElement("audio",{src:s,controls:!1,loop:F,autoPlay:c,preload:u,crossOrigin:l,mediaGroup:d,ref:this.audio},S),f&&m.createElement("div",{className:"rhap_header"},f),m.createElement("div",{className:"rhap_main ".concat(Cr(w))},m.createElement("div",{className:"rhap_progress-section"},this.renderUIModules(E)),m.createElement("div",{className:"rhap_controls-section"},this.renderUIModules(y))),g&&m.createElement("div",{className:"rhap_footer"},g))}}]),o}(_.Component);h(ut,"defaultProps",{autoPlay:!1,autoPlayAfterSrcChange:!0,listenInterval:1e3,progressJumpStep:5e3,progressJumpSteps:{},volumeJumpStep:.1,loop:!1,muted:!1,preload:"auto",progressUpdateInterval:20,defaultCurrentTime:"--:--",defaultDuration:"--:--",timeFormat:"auto",volume:1,className:"",showJumpControls:!0,showSkipControls:!1,showDownloadProgress:!0,showFilledProgress:!0,showFilledVolume:!1,customIcons:{},customProgressBarSection:[C.CURRENT_TIME,C.PROGRESS_BAR,C.DURATION],customControlsSection:[C.ADDITIONAL_CONTROLS,C.MAIN_CONTROLS,C.VOLUME_CONTROLS],customAdditionalControls:[C.LOOP],customVolumeControls:[C.VOLUME],layout:"stacked",hasDefaultKeyBindings:!0,i18nAriaLabels:{player:"Audio player",progressControl:"Audio progress control",volumeControl:"Volume control",play:"Play",pause:"Pause",rewind:"Rewind",forward:"Forward",previous:"Previous",next:"Skip",loop:"Disable loop",loopOff:"Enable loop",volume:"Mute",volumeMute:"Unmute"}});const Br="_customAudioPlayer_14q5l_1",jr={customAudioPlayer:Br},Wr=({onAudioProcess:t})=>{const n=_.useRef(null),o=_.useRef(null),e=_.useRef(null),r=_.useRef(null),[i,s]=_.useState(!1),a=()=>{if(!o.current&&n.current){const l=n.current.audio.current,d=window.AudioContext||window.webkitAudioContext;if(!d){console.warn("AudioContext is not supported in this browser");return}o.current=new d,r.current=o.current.createMediaElementSource(l),e.current=o.current.createAnalyser(),e.current.fftSize=256,r.current.connect(e.current),e.current.connect(o.current.destination),s(!0)}},u=()=>{if(e.current&&i){const l=new Uint8Array(e.current.frequencyBinCount);e.current.getByteFrequencyData(l),t(l)}},c=()=>{a()};return I.jsx("div",{className:jr.customAudioPlayer,children:I.jsx(ut,{ref:n,layout:"horizontal",src:"/audio/Techno_Loop1.mp3",volume:.5,onPlay:c,onListen:u,listenInterval:100})})},Hr=()=>{const[t,n]=_.useState(new Uint8Array(128)),o=e=>{n(e)};return I.jsxs("div",{className:ie.audioPlayerHeader,children:[I.jsx("div",{className:ie.playerWrapper,children:I.jsx(Wr,{onAudioProcess:o})}),I.jsx("div",{className:ie.visualizationWrapper,children:I.jsx(mt,{audioData:t})})]})};export{Hr as default};
